# CLI Contract: `gram parse`

## Command Signature

```text
gram parse <source-file> [--help] [--verbose]
```

| Element        | Type    | Required | Description                                                                 |
|----------------|---------|----------|-----------------------------------------------------------------------------|
| `<source-file>`| Path    | Yes      | Relative or absolute path to a `.gram` source file to parse.               |
| `--help`       | Flag    | No       | Displays usage information for the parse subcommand.                       |
| `--verbose`    | Flag    | No       | (Future) Enables supplemental diagnostics; ignored until requirements expand. |

## Behavior

- Reads the specified file using UTF-8 encoding.
- On success, emits the complete s-expression representation of the parsed grammar to stdout with a trailing newline.
- All diagnostics, progress messages, or errors are written to stderr.
- Exit status:
  - `0` when parsing succeeds.
  - Non-zero (â‰¥1) when IO or parsing fails.

## Error Surface

| Condition                               | Exit Code | Stderr Message Pattern                                                  | Stdout |
|-----------------------------------------|-----------|-------------------------------------------------------------------------|--------|
| File not found / unreadable             | 1         | `Error: unable to read <path> - <system message>`                       | _none_ |
| Parser detects syntax error             | 1         | `Parse failed at line X, column Y: <description>`                       | _none_ |
| Invalid usage (missing path argument)   | 2         | `Usage: gram parse <source-file>` followed by autogenerated help text   | _none_ |

## Integration Notes

- The command participates in the root `gram` CLI via `Command.withSubcommands`.
- Help text is generated by `@effect/cli`; adding descriptions ensures consistent UX.
- Tests should run the command through Effect runtime layers using `MockConsole` to assert stdout/stderr and exit codes.
